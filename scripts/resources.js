let images = {
    // the most important files!!!
    gear: "data/images/gear.png",
    proud: "data/images/proud.png",

    // Misc.
    paper: "data/images/paper.png",
    inventory: "data/images/inventory.png",
    wrench: "data/images/currencies/wrench.png",
    brick: "data/images/currencies/brick.png",

    mainmenu_bg: "data/images/mainmenu_bg.png",
    fight_bg: "data/images/fight_bg2.png",
    gameicon: "data/images/gameicon.png",
    actions: "data/images/actions.png",
    techniques: "data/images/techniques.png",
    switch: "data/images/switch.png",
    flee: "data/images/flee.png",
    gameover: "data/images/GAME_OVER.png",
    selected: "data/images/selected.png",
    grid: "data/images/gridempty.png",
    selected: "data/images/selected.png",
    fleeing: "data/images/fleeing.png",
    hasaction: "data/images/done.png",
    scan: "data/images/scan.png",
    talk: "data/images/talk.png",
    order: "data/images/order.png",

    rain: "data/images/rain.png",
    vignette: "data/images/screenvignette.png",
    star: "data/images/Icon_star.png",
    narratorbg: "data/images/narratorbg.png",
    save: "data/images/save.png",
    load: "data/images/load.png",
    delete: "data/images/delete.png",
    autosave: "data/images/autosave.png",
    mapbuttons: "data/images/mapbuttons.png",
    monsterbook: "data/images/monsterbook.png",

    shopbg: "data/images/shop/shop-bg.png",
    shoptable: "data/images/shop/shop-table.png",
    pawn: "data/images/shop/pawn.png",
    hangingsign: "data/images/hanging-sign.png",

    // attack animations (sword)
    attackani0: "data/images/animations/attack/attackani0.png",
    attackani1: "data/images/animations/attack/attackani1.png",
    attackani2: "data/images/animations/attack/attackani2.png",
    eattackani0: "data/images/animations/attack/eattackani0.png",
    eattackani1: "data/images/animations/attack/eattackani1.png",
    eattackani2: "data/images/animations/attack/eattackani2.png",

    // weather
    fog: "data/images/clouds/fog_cloud.png",
    fog2: "data/images/clouds/fog_cloud2.png",
    cloudshadow1: "data/images/clouds/scloud.png",
    cloudshadow2: "data/images/clouds/scloud2.png",
    cloudshadow3: "data/images/clouds/scloud3.png",

    // Map Maker
    place: "data/images/mm/mode-place.png",
    move: "data/images/mm/mode-move.png",
    erase: "data/images/mm/mode-erase.png",
    movenplace: "data/images/mm/mode-movenplace.png",
    tilesmenu: "data/images/mm/tiles-menu.png",
    loadmap: "data/images/mm/loadm.png",
    savemap: "data/images/mm/save.png",
    newmap: "data/images/mm/delete.png",
    layerbuttons: "data/images/mm/layerbuttons.png",
    senza: "data/images/mm/Senza titolo.png",
    tilemaker: "data/images/mm/tilemaker.png",
    dialoguemaker: "data/images/mm/dialoguemaker.png",
    npcmaker: "data/images/mm/npcmaker.png",
    mmzoom: "data/images/mm/zoom.png",
    undo: "data/images/mm/back.png",
    redo: "data/images/mm/forward.png",
    copy: "data/images/mm/copy.png",
    paste: "data/images/mm/paste.png",
    selectedtile: "data/images/mm/selected-tile.png",
    eye: "data/images/mm/eye.png",
    tilemode: "data/images/mm/tilemode.png",
    fill: "data/images/mm/fill.png",
    tilepickerinfoicons: "data/images/mm/miniicons.png",

    // Save images
    saveimage1: "data/images/pfps/PFP-1.png",
    saveimage2: "data/images/pfps/PFP-2.png",
    saveimage3: "data/images/pfps/PFP-3.png",
    saveimage4: "data/images/pfps/PFP-4.png",
    saveimage5: "data/images/pfps/PFP-5.png",

    // Animations
    spawn: "data/images/animations/spawn_default.png",
    tokenattack: "data/images/animations/token-animation.png",
    schrottgamesanimation: "data/images/animations/sganimation.png",
    tttanimation: "data/images/animations/Toast_Tech_Team_Animation.png",

    // Characters
    bleu: "data/images/protagonists/map/Map_Bleu.png",
    corelle: "data/images/protagonists/map/Map_Corelle.png",
    gau: "data/images/protagonists/map/Map_Gau.png",
    skro: "data/images/protagonists/map/Map_Skro.png",
    kokitozi: "data/images/protagonists/map/Map_Koki.png",
    docaspen: "data/images/protagonists/map/Map_DocAspen.png",

    wm_bleu: "data/images/protagonists/worldmode/Worldmode_Bleu.png",
    wm_corelle: "data/images/protagonists/worldmode/Worldmode_Corelle.png",
    wm_gau: "data/images/protagonists/worldmode/Worldmode_Gau.png",
    wm_skro: "data/images/protagonists/worldmode/Worldmode_Skro.png",
    wm_kokitozi: "data/images/protagonists/worldmode/Worldmode_Koki.png",
    wm_docaspen: "data/images/protagonists/worldmode/Worldmode_DocAspen.png",

    bleu_ani: "data/images/protagonists/other/Bleu_Sprite_Sheet_Other.png",
    corelle_ani: "data/images/protagonists/other/Corelle_Sprite_Sheet_Other.png",
    gau_ani: "data/images/protagonists/other/Gau_Sprite_Sheet_Other.png",
    skro_ani: "data/images/protagonists/other/Skro_Sprite_Sheet_Other.png",
    kokitozi_ani: "data/images/protagonists/other/Skro_Sprite_Sheet_Other.png",
    docaspen_ani: "data/images/protagonists/other/Skro_Sprite_Sheet_Other.png",

    bleu_battle: "data/images/protagonists/battle/Bleu_Battle_Sprite_Sheet.png",
    corelle_battle: "data/images/protagonists/battle/Corelle_Battle_Sprite_Sheet.png",
    gau_battle: "data/images/protagonists/battle/Gau_Battle_Sprite_Sheet.png",
    skro_battle: "data/images/protagonists/battle/Skro_Battle_Sprite_Sheet.png",
    kokitozi_battle: "data/images/protagonists/battle/Kokitozi_Battle_Sprite_Sheet.png",
    docaspen_battle: "data/images/protagonists/battle/Kokitozi_Battle_Sprite_Sheet.png",

    Portraits_Bleu: "data/images/protagonists/portraits/Portraits_Bleu.png",
    Portraits_Corelle: "data/images/protagonists/portraits/Portraits_Corelle.png",
    Portraits_Gau: "data/images/protagonists/portraits/Portraits_Gau.png",
    Portraits_Skro: "data/images/protagonists/portraits/Portraits_Skro.png",
    Portraits_Kokitozi: "data/images/protagonists/portraits/Portraits_Kokitozi.png",
    Portraits_DocAspen: "data/images/protagonists/portraits/Portraits_Kokitozi.png",

    // Elements
    fire: "data/images/elements/fire_element.png",
    earth: "data/images/elements/earth_element.png",
    wind: "data/images/elements/wind_element_colored.png",
    lightning: "data/images/elements/lightning_element.png",
    water: "data/images/elements/water_element.png",
    light: "data/images/elements/light_element.png",
    dark: "data/images/elements/dark_element.png",
    physical: "data/images/elements/physical_element.png",
    ectoplasm: "data/images/elements/ectoplasm_element.png",

    // Effects
    acid: "data/images/effects/acid.png",
    poison: "data/images/effects/poison.png",
    burn: "data/images/elements/fire_element.png",
    enraged: "data/images/effects/berserk_shiny.png",
    paralysis: "data/images/effects/paralysis.png",
    condemned: "data/images/effects/condemned.png",

    // Enemies
    "enemies/black": "data/images/enemies/Map_Black.png",
    "enemies/evil": "data/images/enemies/Map_Evil.png",
    "enemies/weakhelter": "data/images/enemies/Map_Evil.png",
    "enemies/stronghelter": "data/images/protagonists/map/Map_Corelle.png",
    "enemies/itsalive": "data/images/enemies/Map_ItsAlive.png",
    "enemies/livingbarrel": "data/images/enemies/Map_LivingBarrel.png",
    "enemies/nottoofresh": "data/images/enemies/NotTooFreshEnemy.png",

    "enemies/postbox": "data/images/enemies/005_postbox.png",
    "enemies/luridlayered": "data/images/enemies/019_lurid_layered.png",
    "enemies/coal": "data/images/enemies/067_coal.png",
    "enemies/zeropoint": "data/images/enemies/150_zero_point.png",
    "enemies/rhapsody": "data/images/enemies/178_rhapsody.png",
    "enemies/ent": "data/images/enemies/179_ent.png",
    "enemies/cloudon": "data/images/enemies/210_cloudon.png",
    "enemies/cocnutnut": "data/images/enemies/273_cocnutnut.png",
    "enemies/homerunner": "data/images/enemies/439_homerunner.png",
    "enemies/housoo": "data/images/enemies/500_housoo.png",
    "enemies/adose": "data/images/enemies/523_adose.png",
    "enemies/water_shadow": "data/images/enemies/591_water_shadow.png",
    "enemies/ectoplasm_shadow": "data/images/enemies/591_ectoplasm_shadow.png",
    "enemies/slimegreen": "data/images/enemies/610_slime_green.png",
    "enemies/slimewind": "data/images/enemies/610_slime_wind.png",
    "enemies/slimeearth": "data/images/enemies/610_slime_earth.png",
    "enemies/slimewater": "data/images/enemies/610_slime_water.png",
    "enemies/eldritch": "data/images/enemies/639_eldritch.png",
    "enemies/sloper": "data/images/enemies/650_sloper.png",
    "enemies/evilpeter": "data/images/enemies/661_evilpeter.png",
    "enemies/futhark": "data/images/enemies/717_futhark.png",
    "enemies/shapeward": "data/images/enemies/758_shapeward.png",

    // Tiles
    "tiles/empty": "data/images/tiles/empty.png",
    "tiles/water": "data/images/tiles/water.png",
    "tiles/border": "data/images/tiles/border.png",
    "tiles/border2": "data/images/tiles/border2.png",
    "tiles/sand1": "data/images/tiles/sand1.png",

    // Tilesets
    "tilesets/common": "data/images/tilesets/common.png",
    "tilesets/castle": "data/images/tilesets/castle.png",
    "tilesets/teleport": "data/images/tilesets/teleport.png",

    // Items
    "items/crystal_strength": "data/images/items/equipment/crystal_strength.png",
    "items/crystal_defense": "data/images/items/equipment/crystal_defense.png",
    "items/crystal_agility": "data/images/items/equipment/crystal_agility.png",
    "items/crystal_evasion": "data/images/items/equipment/crystal_evasion.png",
    "items/crystal_crit": "data/images/items/equipment/crystal_crit.png",
    "items/crystal_luck": "data/images/items/equipment/crystal_luck.png",

    "items/book_any": "data/images/items/books/book_any.png",
    "items/book_dark": "data/images/items/books/book_dark.png",
    "items/book_earth": "data/images/items/books/book_earth.png",
    "items/book_ectoplasm": "data/images/items/books/book_ectoplasm.png",
    "items/book_empty": "data/images/items/books/book_empty.png",
    "items/book_fire": "data/images/items/books/book_fire.png",
    "items/book_heal": "data/images/items/books/book_heal.png",
    "items/book_light": "data/images/items/books/book_light.png",
    "items/book_lightning": "data/images/items/books/book_lightning.png",
    "items/book_of_fisina": "data/images/items/books/book_of_fisina.png",
    "items/book_physical": "data/images/items/books/book_physical.png",
    "items/book_water": "data/images/items/books/book_water.png",
    "items/book_wind": "data/images/items/books/book_wind.png",

    "items/energy_drink": "data/images/items/energy_drink.png",
    "items/energy_drink_white": "data/images/items/energy_drink_white.png",
    "items/energy_drink_green": "data/images/items/energy_drink_green.png",
    "items/energy_drink_pink": "data/images/items/energy_drink_pink.png",

    "items/syringe_agility": "data/images/items/syringe_agility.png",
    "items/syringe_crit": "data/images/items/syringe_crit.png",
    "items/syringe_defense": "data/images/items/syringe_defense.png",
    "items/syringe_evasion": "data/images/items/syringe_evasion.png",
    "items/syringe_luck": "data/images/items/syringe_luck.png",
    "items/syringe_strength": "data/images/items/syringe_strength.png",

    "items/head_dark": "data/images/items/equipment/head_dark.png",
    "items/head_earth": "data/images/items/equipment/head_earth.png",
    "items/head_ectoplasm": "data/images/items/equipment/head_ectoplasm.png",
    "items/head_fire": "data/images/items/equipment/head_fire.png",
    "items/head_holy": "data/images/items/equipment/head_holy.png",
    "items/head_inferno": "data/images/items/equipment/head_inferno.png",
    "items/head_light": "data/images/items/equipment/head_light.png",
    "items/head_lightning": "data/images/items/equipment/head_lightning.png",
    "items/head_neptune": "data/images/items/equipment/head_neptune.png",
    "items/head_physical": "data/images/items/equipment/head_physical.png",
    "items/head_water": "data/images/items/equipment/head_water.png",
    "items/head_wind": "data/images/items/equipment/head_wind.png",
    "items/head_wood": "data/images/items/equipment/head_wood.png",
    "items/head_chemical": "data/images/items/equipment/head_chemical.png",
    "items/head_glass": "data/images/items/equipment/head_glass.png",
    "items/head_pearl": "data/images/items/equipment/head_pearl.png",
    "items/head_princess": "data/images/items/equipment/head_princess.png",
    "items/tophat": "data/images/items/equipment/tophat.png",

    "items/body_dark": "data/images/items/equipment/body_dark.png",
    "items/body_earth": "data/images/items/equipment/body_earth.png",
    "items/body_ectoplasm": "data/images/items/equipment/body_ectoplasm.png",
    "items/body_fire": "data/images/items/equipment/body_fire.png",
    "items/body_holy": "data/images/items/equipment/body_holy.png",
    "items/body_inferno": "data/images/items/equipment/body_inferno.png",
    "items/body_light": "data/images/items/equipment/body_light.png",
    "items/body_lightning": "data/images/items/equipment/body_lightning.png",
    "items/body_neptune": "data/images/items/equipment/body_neptune.png",
    "items/body_physical": "data/images/items/equipment/body_physical.png",
    "items/body_water": "data/images/items/equipment/body_water.png",
    "items/body_wind": "data/images/items/equipment/body_wind.png",
    "items/body_wood": "data/images/items/equipment/body_wood.png",
    "items/body_chemical": "data/images/items/equipment/body_chemical.png",
    "items/body_glass": "data/images/items/equipment/body_glass.png",
    "items/body_pearl": "data/images/items/equipment/body_pearl.png",
    "items/body_princess": "data/images/items/equipment/body_princess.png",

    "items/shield_dark": "data/images/items/equipment/shield_dark.png",
    "items/shield_earth": "data/images/items/equipment/shield_earth.png",
    "items/shield_ectoplasm": "data/images/items/equipment/shield_ectoplasm.png",
    "items/shield_fire": "data/images/items/equipment/shield_fire.png",
    "items/shield_holy": "data/images/items/equipment/shield_holy.png",
    "items/shield_inferno": "data/images/items/equipment/shield_inferno.png",
    "items/shield_light": "data/images/items/equipment/shield_light.png",
    "items/shield_lightning": "data/images/items/equipment/shield_lightning.png",
    "items/shield_neptune": "data/images/items/equipment/shield_neptune.png",
    "items/shield_physical": "data/images/items/equipment/shield_physical.png",
    "items/shield_water": "data/images/items/equipment/shield_water.png",
    "items/shield_wind": "data/images/items/equipment/shield_wind.png",
    "items/shield_wood": "data/images/items/equipment/shield_wood.png",
    "items/shield_chemical": "data/images/items/equipment/shield_chemical.png",
    "items/shield_glass": "data/images/items/equipment/shield_glass.png",
    "items/shield_pearl": "data/images/items/equipment/shield_pearl.png",
    "items/shield_princess": "data/images/items/equipment/shield_princess.png",

    "items/small_dagger": "data/images/items/equipment/small_dagger.png",
    "items/throwable_daggers": "data/images/items/equipment/throwable_daggers.png",
    "items/sword_dark": "data/images/items/equipment/sword_dark.png",
    "items/sword_double": "data/images/items/equipment/sword_double.png",
    "items/sword_earth": "data/images/items/equipment/sword_earth.png",
    "items/sword_ectoplasm": "data/images/items/equipment/sword_ectoplasm.png",
    "items/sword_fire": "data/images/items/equipment/sword_fire.png",
    "items/sword_holy": "data/images/items/equipment/sword_holy.png",
    "items/sword_hourglass": "data/images/items/equipment/sword_hourglass.png",
    "items/sword_inferno": "data/images/items/equipment/sword_inferno.png",
    "items/sword_light": "data/images/items/equipment/sword_light.png",
    "items/sword_lightning": "data/images/items/equipment/sword_lightning.png",
    "items/sword_neptune": "data/images/items/equipment/sword_neptune.png",
    "items/sword_physical": "data/images/items/equipment/sword_physical.png",
    "items/sword_snake": "data/images/items/equipment/sword_snake.png",
    "items/sword_water": "data/images/items/equipment/sword_water.png",
    "items/sword_wind": "data/images/items/equipment/sword_wind.png",
    "items/sword_wood": "data/images/items/equipment/sword_wood.png",
    "items/sword_bee": "data/images/items/equipment/sword_bee.png",
    "items/sword_burger": "data/images/items/equipment/sword_burger.png",
    "items/sword_chemical": "data/images/items/equipment/sword_chemical.png",
    "items/sword_glass": "data/images/items/equipment/sword_glass.png",
    "items/sword_pearl": "data/images/items/equipment/sword_pearl.png",
    "items/sword_princess": "data/images/items/equipment/sword_princess.png",
    "items/sword_banana": "data/images/items/equipment/sword_banana.png",
    "items/baseballbat": "data/images/items/equipment/baseball_bat.png",

    "items/brickyleaf": "data/images/items/brickyleaf.png",
    "items/potion": "data/images/items/potion.png",
    "items/potion_medium": "data/images/items/potion_medium.png",
    "items/potion_large": "data/images/items/potion_large.png",
    "items/scroll": "data/images/paper.png",
    "items/peppytincture": "data/images/items/peppy.png",
    "items/superswamp": "data/images/items/superswamp.png",
    "items/revive": "data/images/items/perfectangle.png",

    "items/hourglass": "data/images/items/hourglass.png",
    "items/wing": "data/images/items/wing.png",
    "items/instrument": "data/images/items/instrument.png",
    "items/mirror": "data/images/items/mirror.png",
    "items/tropicalmilkshake": "data/images/items/tropicalmilkshake.png",
};

var scenes = {
    title: "scripts/scenes/title.js",
    pretitle: "scripts/scenes/pretitle.js",
    game: "scripts/scenes/game.js",
    fight: "scripts/scenes/fight.js",
    mapmaker: "scripts/scenes/mapmaker.js",
    inventory: "scripts/scenes/inventory.js",
    itemscene: "scripts/scenes/itemscene.js",
    magicscene: "scripts/scenes/magicscene.js",
    formation: "scripts/scenes/formation.js",
    equipment: "scripts/scenes/equipment.js",
    savemanager: "scripts/scenes/savemanager.js",
    settings: "scripts/scenes/settings.js",
    status: "scripts/scenes/status.js",
    shop: "scripts/scenes/shop.js",
    monsterbook: "scripts/scenes/monsterbook.js",
    credits: "scripts/scenes/credits.js",
};

var audio = {
    "bgm/title": "data/bgm/Title_OST.mp3",
    "bgm/placeholder": "data/bgm/field03.mp3",
    "bgm/fight": "data/bgm/battle.ogg",
    "bgm/boss": "data/bgm/boss_battle_full.ogg",

    "bgm/town/intro": "data/bgm/Town_intro.ogg",
    "bgm/town/loop": "data/bgm/town_loop.ogg",

    "bgm/forest/loop": "data/bgm/desperate-forest.mp3",

    "titletransition": "data/sounds/Title_screen_transition.mp3",
    "buttonClickSound": "data/sounds/sound_ok.wav",
    "no": "data/sounds/sound_no.wav",
    "cancel": "data/sounds/sound_cancel.wav",
    "keyitem": "data/sounds/important_item.wav",
    "damage": "data/sounds/damage.wav",
    "critdamage": "data/sounds/critical_damage.wav",
    "teleport": "data/sounds/move area.wav",
    "victory": "data/sounds/jingle03.mp3",
    "miss": "data/sounds/miss.ogg",
    "encounter": "data/sounds/enc_sound.ogg",
    "gameover": "data/sounds/fall_land.wav",
    "heal": "data/sounds/heal.wav",

    "male_young": "data/sounds/voices/dialogue_voice_male_young.ogg",
    "male_grown": "data/sounds/voices/dialogue_voice_male_grown.ogg",
    "female_young": "data/sounds/voices/dialogue_voice_female_young.ogg",
    "female_grown": "data/sounds/voices/dialogue_voice_female_grown.ogg",
};

var maps = {
    "newMap": "scripts/maps/newMap.js",
    "test": "scripts/maps/test.js",
};

var colors = {
    "topcolor": "#d49f52",
    "bottomcolor": "#b58542",
    "buttontop": "#ffae3b",
    "buttonbottom": "#d18822",
    "buttontoppressed": "#ca6100",
    "buttonbottompressed": "#8c3500",
}

var resCount = 0;
var resLoad = 0;

function finishedLoadingResources() {
    if (resLoad == resCount) {
        scene.controls[1].text = "Everything good to go!";
        scene.controls[3].clickthrough = false;
        scene.controls[1].alpha = scene.controls[2].alpha = scene.controls[4].alpha = 1;
    }
}

function loadAllResources() {
    for (let image in images) {
        let img = new Image();
        img.src = images[image];
        img.onload = () => {
            resLoad++;
            scene.controls[1].text = "Loading resources...";
            scene.controls[2].text = "images/" + image + " " + resLoad + "/" + resCount;
            scene.controls[7].sizeAnchor[0] = 0.22 * (resLoad / resCount);
            finishedLoadingResources();
        }
        images[image] = img;
        resCount++;
    }
    for (let scn in scenes) {
        let scr = document.createElement("script");
        scr.src = scenes[scn];
        scr.onload = () => {
            resLoad++;
            scene.controls[1].text = "Loading resources...";
            scene.controls[2].text = "scenes/" + scn + " " + resLoad + "/" + resCount;
            scene.controls[7].sizeAnchor[0] = 0.22 * (resLoad / resCount);
            finishedLoadingResources();
        }
        scenes[scn] = scr;
        document.head.appendChild(scr);
        resCount++;
    }
    for (let snd in audio) {
        let aud = new Audio(audio[snd]);
        aud.onloadeddata = () => {
            resLoad++;
            scene.controls[1].text = "Loading resources...";
            scene.controls[2].text = "audio/" + snd + " " + resLoad + "/" + resCount;
            scene.controls[7].sizeAnchor[0] = 0.22 * (resLoad / resCount);
            finishedLoadingResources();
        }
        audio[snd] = aud;
        resCount++;
    }
    for (let map in maps) {
        let mp = document.createElement("script");
        mp.src = maps[map];
        mp.onload = () => {
            resLoad++;
            scene.controls[1].text = "Loading resources...";
            scene.controls[2].text = "maps/" + map + " " + resLoad + "/" + resCount;
            scene.controls[7].sizeAnchor[0] = 0.22 * (resLoad / resCount);
            finishedLoadingResources();
        }
        maps[map] = mp;
        document.head.appendChild(mp);
        resCount++;
    }
}
