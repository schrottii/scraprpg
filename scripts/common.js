var commontiles = {
    empty: {
        sprite: "empty",
    },

    "C00": {
        "set": "common",
        "snip": [
            0,
            0
        ],
        "occupied": true
    },
    "C01": {
        "set": "common",
        "snip": [
            1,
            0
        ],
        "occupied": false
    },
    "C02": {
        "set": "common",
        "snip": [
            2,
            0
        ],
        "occupied": false
    },
    "C12": {
        "set": "common",
        "snip": [
            2,
            1
        ],
        "occupied": true
    },
    "C03": {
        "set": "common",
        "snip": [
            3,
            0
        ],
        "occupied": true
    },
    "C13": {
        "set": "common",
        "snip": [
            3,
            1
        ],
        "occupied": false
    },
    "C04": {
        "set": "common",
        "snip": [
            4,
            0
        ],
        "occupied": false
    },
    "C14": {
        "set": "common",
        "snip": [
            4,
            1
        ],
        "occupied": true
    },
    "C05": {
        "set": "common",
        "snip": [
            5,
            0
        ],
        "occupied": true
    },
    "C15": {
        "set": "common",
        "snip": [
            5,
            1
        ],
        "occupied": false
    },
    "C06": {
        "set": "common",
        "snip": [
            6,
            0
        ],
        "occupied": false
    },
    "C16": {
        "set": "common",
        "snip": [
            6,
            1
        ],
        "occupied": true
    },
    "C07": {
        "set": "common",
        "snip": [
            7,
            0
        ],
        "occupied": true
    },
    "C17": {
        "set": "common",
        "snip": [
            7,
            1
        ],
        "occupied": false
    },
    "C08": {
        "set": "common",
        "snip": [
            8,
            0
        ],
        "occupied": false
    },
    "C18": {
        "set": "common",
        "snip": [
            8,
            1
        ],
        "occupied": true
    },
    "C09": {
        "set": "common",
        "snip": [
            9,
            0
        ],
        "occupied": true
    },
    "C19": {
        "set": "common",
        "snip": [
            9,
            1
        ],
        "occupied": false
    },
    "C10": {
        "set": "common",
        "snip": [
            0,
            1
        ],
        "occupied": true
    },
    "C11": {
        "set": "common",
        "snip": [
            1,
            1
        ],
        "occupied": true
    },
    "C20": {
        "set": "common",
        "snip": [
            0,
            2
        ],
        "occupied": true
    },
    "C21": {
        "set": "common",
        "snip": [
            1,
            2
        ],
        "occupied": true
    },
    "C24": {
        "set": "common",
        "snip": [
            4,
            2
        ],
        "occupied": true
    },
    "C25": {
        "set": "common",
        "snip": [
            5,
            2
        ],
        "occupied": true
    },
    "C26": {
        "set": "common",
        "snip": [
            6,
            2
        ],
        "occupied": false
    },
    "C27": {
        "set": "common",
        "snip": [
            7,
            2
        ],
        "occupied": true
    },
    "C28": {
        "set": "common",
        "snip": [
            8,
            2
        ],
        "occupied": true
    },
    "C29": {
        "set": "common",
        "snip": [
            9,
            2
        ],
        "occupied": true
    },
    "C30": {
        "set": "common",
        "snip": [
            0,
            3
        ],
        "occupied": true
    },
    "C31": {
        "set": "common",
        "snip": [
            1,
            3
        ],
        "occupied": true
    },
    "C32": {
        "set": "common",
        "snip": [
            2,
            3
        ],
        "occupied": true
    },
    "C33": {
        "set": "common",
        "snip": [
            3,
            3
        ],
        "occupied": true
    },
    "C22": {
        "set": "common",
        "snip": [
            2,
            2
        ],
        "occupied": true
    },
    "C23": {
        "set": "common",
        "snip": [
            3,
            2
        ],
        "occupied": true
    },
    "NAN": {
        "set": "common",
        "snip": [
            3,
            6
        ],
        "occupied": true
    },
    "C34": {
        "set": "common",
        "snip": [
            4,
            3
        ],
        "occupied": true
    },
    "C35": {
        "set": "common",
        "snip": [
            5,
            3
        ],
        "occupied": true
    },
    "C36": {
        "set": "common",
        "snip": [
            6,
            3
        ],
        "occupied": true
    },
    "C37": {
        "set": "common",
        "snip": [
            7,
            3
        ],
        "occupied": false
    },
    "C38": {
        "set": "common",
        "snip": [
            8,
            3
        ],
        "occupied": false
    },
    "C39": {
        "set": "common",
        "snip": [
            9,
            3
        ],
        "occupied": false
    },
    "C40": {
        "set": "common",
        "snip": [
            0,
            4
        ],
        "occupied": true
    },
    "C41": {
        "set": "common",
        "snip": [
            1,
            4
        ],
        "occupied": true
    },
    "C42": {
        "set": "common",
        "snip": [
            2,
            4
        ],
        "occupied": false
    },
    "C43": {
        "set": "common",
        "snip": [
            3,
            4
        ],
        "occupied": false
    },
    "C52": {
        "set": "common",
        "snip": [
            2,
            5
        ],
        "occupied": false
    },
    "C53": {
        "set": "common",
        "snip": [
            3,
            5
        ],
        "occupied": false
    },
    "C44": {
        "set": "common",
        "snip": [
            4,
            4
        ],
        "occupied": false
    },
    "C54": {
        "set": "common",
        "snip": [
            4,
            5
        ],
        "occupied": false
    },
    "C57": {
        "set": "common",
        "snip": [
            7,
            5
        ],
        "occupied": false
    },
    "C47": {
        "set": "common",
        "snip": [
            7,
            4
        ],
        "occupied": false
    },
    "C58": {
        "set": "common",
        "snip": [
            8,
            5
        ],
        "occupied": false
    },
    "C48": {
        "set": "common",
        "snip": [
            8,
            4
        ],
        "occupied": false
    },
    "C59": {
        "set": "common",
        "snip": [
            9,
            5
        ],
        "occupied": false
    },
    "C49": {
        "set": "common",
        "snip": [
            9,
            4
        ],
        "occupied": false
    },
    "C45": {
        "set": "common",
        "snip": [
            5,
            4
        ],
        "occupied": false
    },
    "C46": {
        "set": "common",
        "snip": [
            6,
            4
        ],
        "occupied": false
    },
    "C55": {
        "set": "common",
        "snip": [
            5,
            5
        ],
        "occupied": false
    },
    "C56": {
        "set": "common",
        "snip": [
            6,
            5
        ],
        "occupied": false
    },
    "C50": {
        "set": "common",
        "snip": [
            0,
            5
        ],
        "occupied": true
    },
    "C51": {
        "set": "common",
        "snip": [
            1,
            5
        ],
        "occupied": true
    },
    "C68": {
        "set": "common",
        "snip": [
            8,
            6
        ],
        "occupied": false
    },
    "C69": {
        "set": "common",
        "snip": [
            9,
            6
        ],
        "occupied": false
    },
    "C79": {
        "set": "common",
        "snip": [
            9,
            7
        ],
        "occupied": false
    },
    "C78": {
        "set": "common",
        "snip": [
            8,
            7
        ],
        "occupied": false
    },
    "C60": {
        "set": "common",
        "snip": [
            0,
            6
        ],
        "occupied": false,
        "ani": [
            3,
            1
        ]
    },
    "C64": {
        "set": "common",
        "snip": [
            4,
            6
        ],
        "occupied": false,
        "ani": [
            2,
            1
        ]
    },
    "C70": {
        "set": "common",
        "snip": [
            0,
            7
        ],
        "occupied": false,
        "ani": [
            8,
            1
        ]
    }

}

/*
 saveGame();
            addAnimator(function (t) {
                autoSaveText.alpha = 1 - (1 / 2500) * t;
                if (t > 2500) {
                    autoSaveText.alpha = 0;
                    return true;
                }
                return false;
            })
            */

// Map packs (tilesets)
function loadPacks(map = 0) {
    //console.log("load start");
    let packTiles = {};
    if (map == 0) {
        for (i in game.map.packs) {
            packTiles = Object.assign({}, packs[game.map.packs[i]]);
        }
    }
    else {
        for (i in map.packs) {
            packTiles = Object.assign({}, packs[map.packs[i]]);
        }
    }
    //console.log("load finish");
    return packTiles;
}

var packs = {

    castle:
    {
        "R00": {
            "set": "castle",
            "snip": [
                0,
                0
            ],
            "occupied": true
        },
        "R01": {
            "set": "castle",
            "snip": [
                1,
                0
            ],
            "occupied": true
        },
        "R02": {
            "set": "castle",
            "snip": [
                2,
                0
            ],
            "occupied": true
        },
        "R03": {
            "set": "castle",
            "snip": [
                3,
                0
            ],
            "occupied": true
        },
        "R06": {
            "set": "castle",
            "snip": [
                6,
                0
            ],
            "occupied": true
        },
        "R07": {
            "set": "castle",
            "snip": [
                7,
                0
            ],
            "occupied": true
        },
        "R08": {
            "set": "castle",
            "snip": [
                8,
                0
            ],
            "occupied": true
        },
        "R09": {
            "set": "castle",
            "snip": [
                9,
                0
            ],
            "occupied": true
        },
        "R10": {
            "set": "castle",
            "snip": [
                0,
                1
            ],
            "occupied": false
        },
        "R11": {
            "set": "castle",
            "snip": [
                1,
                1
            ],
            "occupied": false
        },
        "R13": {
            "set": "castle",
            "snip": [
                3,
                1
            ],
            "occupied": false
        },
        "R14": {
            "set": "castle",
            "snip": [
                4,
                1
            ],
            "occupied": false
        },
        "R15": {
            "set": "castle",
            "snip": [
                5,
                1
            ],
            "occupied": false
        },
        "R16": {
            "set": "castle",
            "snip": [
                6,
                1
            ],
            "occupied": false
        },
        "R17": {
            "set": "castle",
            "snip": [
                7,
                1
            ],
            "occupied": false
        },
        "R18": {
            "set": "castle",
            "snip": [
                8,
                1
            ],
            "occupied": false
        },
        "R19": {
            "set": "castle",
            "snip": [
                9,
                1
            ],
            "occupied": false
        },
        "R20": {
            "set": "castle",
            "snip": [
                0,
                2
            ],
            "occupied": false
        },
        "R21": {
            "set": "castle",
            "snip": [
                1,
                2
            ],
            "occupied": false
        },
        "R2X": {
            "set": "castle",
            "snip": [
                0,
                2
            ],
            "occupied": false,
            "ani": [
                2,
                1
            ]
        },
        "R22": {
            "set": "castle",
            "snip": [
                2,
                2
            ],
            "occupied": false
        },
        "R23": {
            "set": "castle",
            "snip": [
                3,
                2
            ],
            "occupied": false
        },
        "R24": {
            "set": "castle",
            "snip": [
                4,
                2
            ],
            "occupied": false
        },
        "R25": {
            "set": "castle",
            "snip": [
                5,
                2
            ],
            "occupied": false
        },
        "R26": {
            "set": "castle",
            "snip": [
                6,
                2
            ],
            "occupied": false
        },
        "R27": {
            "set": "castle",
            "snip": [
                7,
                2
            ],
            "occupied": false
        },
        "R36": {
            "set": "castle",
            "snip": [
                6,
                3
            ],
            "occupied": false
        },
        "R37": {
            "set": "castle",
            "snip": [
                7,
                3
            ],
            "occupied": false
        },
        "R28": {
            "set": "castle",
            "snip": [
                8,
                2
            ],
            "occupied": false
        },
        "R29": {
            "set": "castle",
            "snip": [
                9,
                2
            ],
            "occupied": false
        },
        "R38": {
            "set": "castle",
            "snip": [
                8,
                3
            ],
            "occupied": false
        },
        "R39": {
            "set": "castle",
            "snip": [
                9,
                3
            ],
            "occupied": false
        },
        "R30": {
            "set": "castle",
            "snip": [
                0,
                3
            ],
            "occupied": false
        },
        "R31": {
            "set": "castle",
            "snip": [
                1,
                3
            ],
            "occupied": false
        },
        "R32": {
            "set": "castle",
            "snip": [
                2,
                3
            ],
            "occupied": false
        },
        "R33": {
            "set": "castle",
            "snip": [
                3,
                3
            ],
            "occupied": false
        },
        "R40": {
            "set": "castle",
            "snip": [
                0,
                4
            ],
            "occupied": false,
            "ani": [
                2,
                1
            ]
        },
        "R50": {
            "set": "castle",
            "snip": [
                0,
                5
            ],
            "occupied": false,
            "ani": [
                2,
                1
            ]
        },
        "R42": {
            "set": "castle",
            "snip": [
                2,
                4
            ],
            "occupied": false,
            "ani": [
                2,
                1
            ]
        },
        "R52": {
            "set": "castle",
            "snip": [
                2,
                5
            ],
            "occupied": false,
            "ani": [
                2,
                1
            ]
        },
        "R44": {
            "set": "castle",
            "snip": [
                4,
                4
            ],
            "occupied": false,
            "ani": [
                2,
                1
            ]
        },
        "R54": {
            "set": "castle",
            "snip": [
                4,
                5
            ],
            "occupied": false,
            "ani": [
                2,
                1
            ]
        },
        "R46": {
            "set": "castle",
            "snip": [
                6,
                4
            ],
            "occupied": false,
            "ani": [
                2,
                1
            ]
        },
        "R56": {
            "set": "castle",
            "snip": [
                6,
                5
            ],
            "occupied": false,
            "ani": [
                2,
                1
            ]
        },
        "R60": {
            "set": "castle",
            "snip": [
                0,
                6
            ],
            "occupied": false
        },
        "R61": {
            "set": "castle",
            "snip": [
                1,
                6
            ],
            "occupied": false
        },
        "R62": {
            "set": "castle",
            "snip": [
                2,
                6
            ],
            "occupied": false
        },
        "R63": {
            "set": "castle",
            "snip": [
                3,
                6
            ],
            "occupied": false
        },
        "R64": {
            "set": "castle",
            "snip": [
                4,
                6
            ],
            "occupied": false
        }
    },

    desert: 
    {
        "D01": {
            "set": "desert",
            "snip": [
                1,
                0
            ],
            "occupied": false
        },
        "D02": {
            "set": "desert",
            "snip": [
                2,
                0
            ],
            "occupied": false
        },
        "D03": {
            "set": "desert",
            "snip": [
                3,
                0
            ],
            "occupied": false
        },
        "D04": {
            "set": "desert",
            "snip": [
                4,
                0
            ],
            "occupied": false
        },
        "D05": {
            "set": "desert",
            "snip": [
                5,
                0
            ],
            "occupied": false
        },
        "D06": {
            "set": "desert",
            "snip": [
                6,
                0
            ],
            "occupied": false
        },
        "D10": {
            "set": "desert",
            "snip": [
                0,
                1
            ],
            "occupied": false
        },
        "D20": {
            "set": "desert",
            "snip": [
                0,
                2
            ],
            "occupied": true
        },
        "D11": {
            "set": "desert",
            "snip": [
                1,
                1
            ],
            "occupied": false
        },
        "D21": {
            "set": "desert",
            "snip": [
                1,
                2
            ],
            "occupied": true
        },
        "D12": {
            "set": "desert",
            "snip": [
                2,
                1
            ],
            "occupied": true
        },
        "D22": {
            "set": "desert",
            "snip": [
                2,
                2
            ],
            "occupied": true
        },
        "D13": {
            "set": "desert",
            "snip": [
                3,
                1
            ],
            "occupied": true
        },
        "D23": {
            "set": "desert",
            "snip": [
                3,
                2
            ],
            "occupied": true
        },
        "D14": {
            "set": "desert",
            "snip": [
                4,
                1
            ],
            "occupied": true
        },
        "D15": {
            "set": "desert",
            "snip": [
                5,
                1
            ],
            "occupied": true
        },
        "D24": {
            "set": "desert",
            "snip": [
                4,
                2
            ],
            "occupied": true
        },
        "D25": {
            "set": "desert",
            "snip": [
                5,
                2
            ],
            "occupied": true
        },
        "D16": {
            "set": "desert",
            "snip": [
                6,
                1
            ],
            "occupied": true
        },
        "D26": {
            "set": "desert",
            "snip": [
                6,
                2
            ],
            "occupied": true
        },
        "D30": {
            "set": "desert",
            "snip": [
                0,
                3
            ],
            "occupied": false,
            "ani": [
                2,
                2
            ]
        },
        "D40": {
            "set": "desert",
            "snip": [
                0,
                4
            ],
            "occupied": true,
            "ani": [
                2,
                2
            ]
        },
        "D50": {
            "set": "desert",
            "snip": [
                0,
                5
            ],
            "occupied": true,
            "ani": [
                2,
                2
            ]
        },
        "D31": {
            "set": "desert",
            "snip": [
                1,
                3
            ],
            "occupied": false,
            "ani": [
                2,
                2
            ]
        },
        "D41": {
            "set": "desert",
            "snip": [
                1,
                4
            ],
            "occupied": true,
            "ani": [
                2,
                2
            ]
        },
        "D51": {
            "set": "desert",
            "snip": [
                1,
                5
            ],
            "occupied": true,
            "ani": [
                2,
                2
            ]
        },
        "D34": {
            "set": "desert",
            "snip": [
                4,
                3
            ],
            "occupied": false
        },
        "D35": {
            "set": "desert",
            "snip": [
                5,
                3
            ],
            "occupied": false
        },
        "D36": {
            "set": "desert",
            "snip": [
                6,
                3
            ],
            "occupied": false
        },
        "D44": {
            "set": "desert",
            "snip": [
                4,
                4
            ],
            "occupied": false
        },
        "D45": {
            "set": "desert",
            "snip": [
                5,
                4
            ],
            "occupied": false
        },
        "D46": {
            "set": "desert",
            "snip": [
                6,
                4
            ],
            "occupied": false
        },
        "D49": {
            "set": "desert",
            "snip": [
                9,
                4
            ],
            "occupied": true
        },
        "D47": {
            "set": "desert",
            "snip": [
                7,
                4
            ],
            "occupied": false
        },
        "D57": {
            "set": "desert",
            "snip": [
                7,
                5
            ],
            "occupied": true
        },
        "D48": {
            "set": "desert",
            "snip": [
                8,
                4
            ],
            "occupied": false
        },
        "D58": {
            "set": "desert",
            "snip": [
                8,
                5
            ],
            "occupied": true
        },
        "D08": {
            "set": "desert",
            "snip": [
                8,
                0
            ],
            "occupied": false
        },
        "D17": {
            "set": "desert",
            "snip": [
                7,
                1
            ],
            "occupied": false
        },
        "D18": {
            "set": "desert",
            "snip": [
                8,
                1
            ],
            "occupied": false
        },
        "D19": {
            "set": "desert",
            "snip": [
                9,
                1
            ],
            "occupied": false
        },
        "D27": {
            "set": "desert",
            "snip": [
                7,
                2
            ],
            "occupied": true
        },
        "D28": {
            "set": "desert",
            "snip": [
                8,
                2
            ],
            "occupied": true
        },
        "D29": {
            "set": "desert",
            "snip": [
                9,
                2
            ],
            "occupied": true
        },
        "D37": {
            "set": "desert",
            "snip": [
                7,
                3
            ],
            "occupied": false
        },
        "D38": {
            "set": "desert",
            "snip": [
                8,
                3
            ],
            "occupied": true
        },
        "D39": {
            "set": "desert",
            "snip": [
                9,
                3
            ],
            "occupied": true
        }
    }
};